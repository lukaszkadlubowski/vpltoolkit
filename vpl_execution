#!/bin/bash
rm -f $0

if [ -f ./env.sh ] ; then
    source ./env.sh
elif [ -f $HOME/env.sh ] ; then
    source $HOME/env.sh
else
    echo "⚠ File \"env.sh\" is missing!" && exit 0
fi

[ "$VERBOSE" = "1" ] && echo "Start VPL Execution Stage in $MODE mode"

[ -z "$MODE" ] && echo "⚠ Variable \"MODE\" is not defined!" && exit 0
if [ "$MODE" = "RUN" ] ; then
    CMD="$RUNDIR/run.sh"
elif [ "$MODE" = "EVAL" ] ; then
    CMD="$RUNDIR/eval.sh"
else
    echo "⚠ Invalid \"MODE\" selected!" && exit 0
fi

[ ! -f "$CMD" ] && echo "⚠ File \"$CMD\" not found!" && exit 0

[ -z "$RUNDIR" ] && echo "⚠ Variable \"RUNDIR\" is not defined!" && exit 0
if [ "$DEBUG" = "1" ] ; then
    cd $RUNDIR && bash -x $CMD
else
    cd $RUNDIR && bash $CMD
fi

# EOF
